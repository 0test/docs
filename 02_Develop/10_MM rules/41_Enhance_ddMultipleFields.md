mm_ddMultipleFieldsPlugin
Версия: 4.5
Выпущено: 10 декабря 2013
Метки: Manager
Использует: Плагин ManagerManager 0.6
Скачать20 скачиваний
Описание
Виджет для плагина ManagerManager, позволяющий добавлять произвольное количество значений полей (TV) к одному документу (значения записываются в одно через необходимые разделители), например: несколько изображений. Возможности:
Добавление к одному документу произвольного количества изображений, текстовых полей, списков (с возможностью выбора значений).
Задание нескольких колонок разных типов (или одинаковых), например: изображения и подписи к ним (параметр «coloumns»).
Вывод заголовков колонок (параметр «coloumnsTitle»).
Количество значений (строк) может быть как фиксированным, динамичным, так и в определённых диапазонах (параметры «minRow» и «maxRow»).
Сортировка (перетаскивание) строк между собой.
Генерация уникального идентификатора каждой строки (параметр «coloumns»).
Вывод предопределённых списков значений (параметры «coloumns» и «coloumnsData»). Внимание, это пока в бете!
Скриншоты
A few imagesImages with titlesSorting
Список изменений
Добавлен новый тип колонок «richtext» (см. параметр «coloumns»).
Добавлена поддержка TV типов «textarea» и «email».
Один вызов функции «tplUseTvs» с передачей необходимых для получения полей вместо трёх.
Js и css подключаются через функцию «includeJsCss» (что позволяет совсем не беспокоиться о дубликатах).
Js-код вынесен в отдельный файл и частично переработан. Мало того, что это просто удобно (ничего лишнего в php), это ещё и сокращает объём исходного кода формы редактирования документа, исключая дубликаты при множественных вызовах.
Подключение необходимых js и css вынесено в отдельное событие «OnDocFormPrerender», файлы сейчас подключаются в обычном html-виде, а не через js.
При разборе данных «$columnsData» спецсимволы экранируются в любом случае (а не только при eval).
При создании колонки типа «id» title предаётся как '', а ширина как 0 (т.к. всё равно ничего этого не нужно).
При обработке заголовков колонок учитываются колонки типа «id».
Внимание! Необходим ManagerManager версии 0.6.
Документация
Для установки распакуйте архив в /assets/plungins/managermanager/widgets/. Смотрите также документацию ManagerManager 0.6, модуль ddMMEditor и сниппет ddGetMultipleField.
Описание параметров
Название	Описание	Допустимые значения	Значение по умолчанию	Обязателен?
tvs	Имена TV, для которых необходимо применить виджет.	{comma separated string}	—	true
roles	Роли, для которых необходимо применить виждет, пустое значение — все роли.	{comma separated string}	—	false
templates	Id шаблонов, для которых необходимо применить виджет, пустое значение — все шаблоны.	{comma separated string}	—	false
columns	Типы колонок: field — колонка типа поля; text — текстовая колонка; textarea — колонка с многострочным полем; richtext — колонка с HTML-редактором (TinyMCE); date — колонка с датой; id — скрытая колонка с уникальным идентификатором; select — список с выбором значений (см. параметр «coloumnsData»).	{comma separated string}	'field'	false
columnsTitle	Заголовки колонок.	{comma separated string}	—	false
colWidth	Ширины колонок (может быть задана одна ширина).	{comma separated string}	180	false
splY	Разделитель между строками.	{string}	'||'	false
splX	Разделитель между колонками.	{string}	'::'	false
imgW	Максимальная ширина превьюшки (для изображений).	{integer}	300	false
imgH	Максимальная высота превьюшки (для изображений).	{integer}	100	false
minRow	Минимальное количество строк.	{integer}	0	false
maxRow	Максимальное количество строк (0 — без лимита).	{integer}	0	false
columnsData	Список возможных значений для полей в формате json, через ||.	{separated string}	—	false
Примеры
Сделать возможность добавления произвольного изображений для tv «someImage» (у tv должен быть выставлен тип «image»)
mm_ddMultipleFields('someImage');
Возможность добавления изображений и подписей к ним, вывод соответствующих заголовков только для шаблонов с id = 5
mm_ddMultipleFields('someImage', '', '5', 'field,text', 'Изображение,Подпись');
Возможность добавления контактов сотрудников, но не более 5 и не меньше 2, с разными размерами колонок (для текстовой tv «employees»)
mm_ddMultipleFields('employees', '', '', 'text,text,text', 'Имя,Телефон,Должность', '250,100,100', '||', '::', 300, 100, 2, 5);