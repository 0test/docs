
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<h2>FormLister: Восстановление паролей пользователями</h2>

<p>Контроллер <span class="text-bold">Reminder</span> позволяет web-пользователям восстанавливать забытые пароли. Расширяет контроллер Form.</p>
<p>Восстановление паролей происходит по следующей схеме:</p>
<ul>
<li>пользователь вводит в форме свой идентификатор (им может быть имя пользователя или email);</li>
<li>пользователь получает письмо, в котором содержится ссылка для восстановления;</li>
<li>при переходе по ссылке пользователь получает возможность ввести новый пароль либо пароль будет сгенерирован автоматически;</li>
<li>пользователю отправляется письмо с новым паролем и показыается сообщение (в сообщении можно также вывести новый пароль).</li>
</ul>
<p>Параметр to перезаписывается значением email пользователя. Обязательно должен быть задан параметр resetTo.</p>
<h2 class="page-header">Параметры</h2>
<h3 class="sub-header text-bold">model</h3>
<p>Класс для работы с пользователями.</p>
<p>Возможные значения - имя класса.</p>
<p>Значение по умолчанию - \modUsers</p>
<h3 class="sub-header text-bold">modelPath</h3>
<p>Путь к файлу класса для работы с пользователями.</p>
<p>Возможные значения - относительный путь к файлу.</p>
<p>Значение по умолчанию - assets/lib/MODxAPI/modUsers.php</p>
<h3 class="sub-header text-bold">hashField</h3>
<p>Имя поля для хранения хэша данных пользователя.</p>
<p>Значение по умолчанию - hash.</p>
<h3 class="sub-header text-bold">userField</h3>
<p>Имя поля для хранения идентификатора пользователя (имя пользователя или email).</p>
<p>Значение по умолчанию - email.</p>
<h3 class="sub-header text-bold">uidField</h3>
<p>Имя поля, которое используется для идентификации пользователя при переходе по ссылке.</p>
<p>Значение по умолчанию - id.</p>
<h3 class="sub-header text-bold">exitTo</h3>
<p>Перенаправляет авторизованного пользователя на указанную страницу.</p>
<p>Возможные значения - id целевой страницы.</p>
<p>Значение по умолчанию - пусто.</p>
<h3 class="sub-header text-bold">resetTo</h3>
<p>Страница, на которую будет указывать ссылка для восстановления паролей. Обязательный параметр.</p>
<p>Возможные значения - id целевой страницы.</p>
<p>Значение по умолчанию - id документа, в котором вызван контроллер.</p>
<h3 class="sub-header text-bold">redirectTo</h3>
<p>Перенаправляет на указанную страницу после успешного восстановления пароля.</p>
<p>Возможные значения - id целевой страницы.</p>
<p>Значение по умолчанию - пусто.</p>
<h3 class="sub-header text-bold">skipTpl</h3>
<p>Шаблон сообщения для авторизованного пользователя.</p>
<p>Возможные значения - имя шаблона, указанное по правилам задания шаблонов в DocLister.</p>
<p>Значение по умолчанию - запись из лексикона Reminder с ключом [+reminder.default_skipTpl+].</p>
<h3 class="sub-header text-bold">formTpl</h3>
<p>Шаблон формы для ввода идентификатора пользователя.</p>
<p>Возможные значения - имя шаблона, указанное по правилам задания шаблонов в DocLister.</p>
<p>Значение по умолчанию - пусто.</p>
<h3 class="sub-header text-bold">resetTpl</h3>
<p>Шаблон формы для ввода нового пароля. Если параметр не задан, то пароль будет сгенерирован автоматически.</p>
<p>Поля для ввода паролей должны называться password и repeatPassword. В форме должны также присутствовать скрытые поля с именами из параметров uidField и hashField. Значение для поля hashField задается через плейсхолдер [+user.hash+].</p>
<p>Возможные значения - имя шаблона, указанное по правилам задания шаблонов в DocLister.</p>
<p>Значение по умолчанию - пусто.</p>
<h3 class="sub-header text-bold">successTpl</h3>
<p>Шаблон сообщения об успешной отправке письма со ссылкой для восстановления пароля. В шаблоне можно выводить плейсхолдеры с данными пользователя (username, email и т.д.).</p>
<p>Возможные значения - имя шаблона, указанное по правилам задания шаблонов в DocLister.</p>
<p>Значение по умолчанию - запись из лексикона Reminder с ключом [+reminder.default_successTpl+].</p>
<h3 class="sub-header text-bold">resetSuccessTpl</h3>
<p>Шаблон сообщения об успешном восстановлении пароля. В шаблоне можно выводить плейсхолдеры с данными пользователя (username, email и т.д.), а также новый пароль (newpassword).</p>
<p>Возможные значения - имя шаблона, указанное по правилам задания шаблонов в DocLister.</p>
<p>Значение по умолчанию - запись из лексикона Reminder с ключом [+reminder.default_resetSuccessTpl+].</p>
<h3 class="sub-header text-bold">reportTpl</h3>
<p>Шаблон письма со ссылкой для восстановления пароля. В шаблоне можно выводить плейсхолдеры с данными пользователя (username, email и т.д.), а также новый пароль (newpassword). Ссылка для восстановлени пароля в письме задается через плейсхолдер [+reset.url+]</p>
<p>Возможные значения - имя шаблона, указанное по правилам задания шаблонов в DocLister.</p>
<p>Значение по умолчанию - запись из лексикона Reminder с ключом [+reminder.default_reportTpl+]..</p>
<h3 class="sub-header text-bold">resetReportTpl</h3>
<p>Шаблон письма об успешном восстановлении пароля. В шаблоне можно выводить плейсхолдеры с данными пользователя (username, email и т.д.), а также новый пароль (newpassword). Если не задан, то письмо пользователю отправляться не будет.</p>
<p>Возможные значения - имя шаблона, указанное по правилам задания шаблонов в DocLister.</p>
<p>Значение по умолчанию - пусто.</p>
<h3 class="sub-header text-bold">rules</h3>
<p>Правила валидации для формы идентификации пользователя.</p>
<p>Возможные значения - см. раздел "Валидация данных".</p>
<p>Значение по умолчанию - пусто.</p>
<h3 class="sub-header text-bold">resetRules</h3>
<p>Правила валидации для формы установки нового пароля. Если заданы правила валидации для полей password и repeatPassword, то при наличии для поля repeatPassword правила equals, оно будет автоматически скорректировано для проверки равенства значений полей password и repeatPassword:</p>
<pre class="brush: html;">"repeatPassword":{
	"required":"Введите пароль еще раз",
	"equals":{
		"params" : "Этот ключ в описании правила можно не задавать, он будет сформирован контроллером автоматически",
		"message":"Пароли не совпадают"
	}
}</pre>
<p>Возможные значения - см. раздел "Валидация данных".</p>
<p>Значение по умолчанию - пусто.</p>
<h3 class="sub-header text-bold">passwordLength</h3>
<p>Длина пароля (если создается автоматически).</p>
<p>Возможные значения - число символов больше 6.</p>
<p>Значение по умолчанию - 6.</p>